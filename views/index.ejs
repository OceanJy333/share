<%- include('partials/header', { title }) %>

<div class="main-container">
  <header class="app-header">
    <div class="title-container">
      <h1 class="cyber-title">HTML-Share</h1>
    </div>
    <p class="app-description">简洁高效的代码分享平台</p>
  </header>

  <div class="content-area">
    <!-- 代码输入卡片 -->
    <div class="card input-card">
      <div class="input-section">
        <!-- 加载指示器 -->
        <div id="loading-indicator" class="loading-indicator">
          <div class="spinner"></div>
          <span>处理中...</span>
        </div>

        <!-- 代码输入 -->
        <div id="code-input-container">
          <div id="code-type-indicator" class="code-type-indicator">
            <i class="fas fa-code"></i>
            <span id="code-type-text">HTML</span>
          </div>
          <textarea
            id="html-input"
            class="cyber-input"
            placeholder="在这里粘贴你的 HTML/Markdown/SVG 代码..."
            aria-label="代码输入区域"></textarea>
        </div>

        <!-- 隐藏文件上传 -->
        <div style="display: none;">
          <input id="html-file" type="file" class="hidden" accept=".html,.htm" />
        </div>

        <!-- 分享选项 -->
        <div class="share-options">
          <div class="option-group">
            <label class="option-label">
              <i class="fas fa-clock"></i>
              有效期
            </label>
            <select id="expiry-select" class="option-select">
              <option value="0">永久</option>
              <option value="1">1天</option>
              <option value="3">3天</option>
              <option value="5">5天</option>
              <option value="7" selected>7天</option>
              <option value="14">14天</option>
              <option value="30">30天</option>
            </select>
          </div>

          <div class="option-group">
            <label class="option-label">
              <i class="fas fa-key"></i>
              查看密码
            </label>
            <input type="text" id="view-password" class="option-input" placeholder="留空为不设密码" maxlength="20">
          </div>
        </div>

        <!-- 按钮 -->
        <div style="display: flex; justify-content: space-between; gap: 1rem;">
          <label for="html-file" class="tooltip" data-tooltip="上传HTML文件">
            <i class="fas fa-file-upload"></i>上传文件
          </label>
          <div style="display: flex; gap: 0.75rem;">
            <button id="clear-button" class="cyber-btn cyber-btn-secondary tooltip" data-tooltip="清空内容">
              <i class="fas fa-eraser"></i>清除
            </button>
            <button id="generate-button" class="cyber-btn cyber-btn-primary tooltip" data-tooltip="生成分享链接">
              <i class="fas fa-link"></i>生成链接
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- 结果区域卡片 -->
    <div id="result-section" class="card result-card" style="display: none;">
      <h3 class="section-title">链接已生成</h3>
      <div class="result-container">
        <div id="result-url" class="result-url"></div>
        <div class="action-buttons">
          <button id="preview-button" class="action-btn preview-btn tooltip" data-tooltip="预览">
            <i class="fas fa-external-link-alt"></i>
          </button>
          <button id="copy-button" class="action-btn tooltip" data-tooltip="复制链接">
            <i class="fas fa-copy"></i>
          </button>
        </div>
      </div>

      <!-- 密码保护开关 -->
      <div class="password-protection-toggle">
        <div class="protection-controls">
          <div class="switch-container">
            <input type="checkbox" id="password-toggle" class="switch-checkbox">
            <label for="password-toggle" class="switch-label"></label>
          </div>
          <div id="password-info" class="password-info" style="display: none;">
            <span id="generated-password" class="generated-password" title="点击复制密码"></span>
            <a href="#" id="copy-password-link" class="copy-password-link">复制密码和网址</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer class="app-footer">
    <div class="footer-content">
      <p>© 2025 HTML-Share</p>
      <div class="footer-links">
        <% if (isAdmin) { %>
        <a href="/admin" class="admin-link">
          <i class="fas fa-cog"></i> 控制台
        </a>
        <% } %>
        <a href="/logout" class="logout-link">
          <i class="fas fa-sign-out-alt"></i> 退出
        </a>
      </div>
    </div>
  </footer>
</div>

<style>
/* 分享选项样式 */
.share-options {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
  margin-bottom: 1rem;
  padding: 1rem;
  background: var(--bg-input);
  border-radius: 8px;
  border: 1px solid var(--border-color);
}

.option-group {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.option-label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.9rem;
  color: var(--text-primary);
  font-weight: 500;
}

.option-label i {
  color: var(--primary);
  font-size: 0.85rem;
}

.option-select,
.option-input {
  width: 100%;
  padding: 0.6rem 0.8rem;
  border: 1px solid var(--border-color);
  border-radius: 6px;
  background: white;
  font-size: 0.9rem;
  color: var(--text-primary);
  outline: none;
  transition: all 0.2s;
}

.option-select:focus,
.option-input:focus {
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(139, 157, 195, 0.1);
}

.option-input::placeholder {
  color: var(--text-secondary);
  opacity: 0.6;
}

.footer-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 1rem;
}

.footer-links {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.admin-link,
.logout-link {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  color: white;
  text-decoration: none;
  border-radius: 6px;
  font-size: 0.9rem;
  font-weight: 500;
  transition: all 0.2s;
}

.admin-link {
  background: var(--primary-dark);
}

.logout-link {
  background: var(--text-secondary);
}

.admin-link:hover {
  background: #5A6D8F;
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(90, 109, 143, 0.4);
}

.logout-link:hover {
  background: #9BA9C4;
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(155, 169, 196, 0.25);
}

@media (max-width: 768px) {
  .share-options {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 480px) {
  .footer-content {
    flex-direction: column;
    text-align: center;
  }
}
</style>

<%- include('partials/footer') %>
